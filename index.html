<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Taxi App</title>
    <link rel="stylesheet" type="text/css" href="semantic/semantic.min.css">
    <link rel="stylesheet" href="styles.css">

    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"
        integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
    <script src="semantic/semantic.min.js"></script>
    <!-- Alpine Plugins -->
<script defer src="https://unpkg.com/@alpinejs/persist@3.x.x/dist/cdn.min.js"></script>
    <script src="app.js"></script>
</head>

<body>
    <div class="container">
        <div x-data="taxi">
            <div class="row">
                <h1 class="ui header center aligned">Taxi Trip</h1>
            </div>
            <div class="row add-more">
                <div class="totals">
                    Total made a day:<p class="tripsOverall"></p>
                    Total number of ques:<p class="tripsQty"></p>
                </div>

                    <template x-for="route in routes">
                        <div x-data="{ openAddRoute: false }" class="add-route">
                            <div x-show="openAddRoute" class="show-destination">
                                <label for="destination">Destination</label>
                                <input id="destination" type="text" placeholder="enter destination">
                                <label for="destination">Taxi Fare</label>
                                <input id="fareForDestination" type="number" step="0.01" placeholder="enter amount">
                                <button @click="addToRoute(route)" type="submit">Add</button>
    
                            </div>
                            <button @click="openAddRoute = !openAddRoute" class="ui secondary button">Add
                                Route</button>
                        </div>
    
                        <div x-data="{ openAddTaxi: false }" class="add-taxi">
                            <div x-show="openAddTaxi" class="show-destination">
                                <label for="destination">Destination</label>
                                <input type="text" placeholder="enter destination">
                                <label for="destination">Taxi Fare</label>
                                <input type="number" step="0.01" placeholder="enter amount">
                                <button>Add</button>
    
                            </div>
                            <!--  -->
                            <button @click="openAddTaxi = !openAddTaxi" class="ui secondary button">Add
                                Taxi</button>
                        </div>
                    </template>
            </div>


            <div class="row">
                <table class="ui very basic celled table">
                    <tr>
                        <th>Depature</th>
                        <th>Destination</th>
                        <th>Passenger Actions</th>
                        <th>Taxi Trips</th>
                        <th>Taxi Fare</th>
                        <th>Total Fare</th>
                        <th>Taxi Available</th>
                    </tr>

                    <tbody>
                        <template x-for="route in routes">
                            <tr>
                                <td>Cape Town</td>
                                <td x-text="route.name"></td>
                                <td>

                                    <div class="ui large buttons">

                                        <button class="ui secondary button" @click="route.qtyUpFun()">
                                            <i class="plus circle icon"></i>
                                        </button>
                                        <div x-text="route.queue" :data-text="route.queue" class="or"></div>
                                        <button class="ui secondary button" @click="route.qtydownFun()">
                                            <i class="minus circle icon"></i>
                                        </button>
                                    </div>
                                </td>
                                <td>
                                    <div class="ui buttons">
                                        <button x-bind:disabled="(route.queue < passengersPerTaxi) && (availableTaxi > 0)" class="ui red basic button"
                                            @click="takeTripFromPassengers(route)">Leave</button>
                                        <button x-text="route.trips" class="ui green basic button"></button>
                                    </div>
                                </td>
                                <td x-text="`R${route.fare}`"></td>
                                <!-- <td x-text="`R${route.totalFare()}`"></td> -->
                                <td x-text="route.costPerTrip"></td>
                                <td x-text="route.availableTaxi"></td>
                            </tr>
                        </template>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

</body>

</html>